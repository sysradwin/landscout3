angular.module('landscout', [])





var myController = function($scope, landscoutData, geolocation){
	// controller code here
	$scope.data = {locations: landscoutData}
	landscoutData
		.success(function(data){
			$scope.data = { locations: data }
		})

		.error(function(e){
			console.log(e);
		})
}


var landscoutData = function($http){
	

	var locationByCoords = function(lat, lng){
	var lat = 54.467
	var lng = -0.98357

		return $http.get('/api/locations?lat=' + lat + '&lng=' + lng + '&maxDistance=300000000000');

	};

	// Delete the function call below later.  Just using it to verify API calls still work.
	locationByCoords()
	return { locationByCoords : locationByCoords };

// 	// return [{
// 	// 	name: 'Burger Queen',
// 	// 	address: '125 High Street',
// 	// 	activities: ["Hunting", "Fishing"]
// 	// }]

}


var geolocation = function()  {
	var getPosition = function(cbSuccess, cbError, cbNoGeo) {
		if (navigator.geolocation){
			navigator.geolocation.getCurrentPosition(cbSuccess, cbError);
		}
		else{
			cbNoGeo();
		}
	}
	return {
		getPosition : getPosition
	};
};







angular
	.module('landscout')
	.controller('myController', myController)
	.service('landscoutData', landscoutData)
	.service('geolocation', geolocation);